/*! redirectToNative - v1.1 - 2013-09-04 4:08:45 PM
* Copyright (c) 2013 miaojing; Licensed  */
KISSY.add("gallery/redirectToNative/1.1/index",function(a,b){function c(a){var b=this;b.el=a,b.init()}return a.augment(c,{init:function(){var a=this;a.platform=a._UA(),a.platform&&b.on(a.el,"click",function(b){b.preventDefault();var c=b.currentTarget;"ios"==a.platform?(a.installUrl=c.getAttribute("data-ios-install-url"),a.nativeUrl=c.getAttribute("data-ios-native-url")):(a.installUrl=c.getAttribute("data-android-install-url"),a.nativeUrl=c.getAttribute("data-android-native-url")),a._gotoNative()})},_gotoNative:function(){var a=this,b=Date.now(),c=document,d=c.body,e=c.createElement("iframe");e.id="J_redirectNativeFrame",e.style.display="none",e.src=a.nativeUrl,d?d.appendChild(e):setTimeout(function(){c.body.appendChild(e)},0),setTimeout(function(){c.body.removeChild(e),a._gotoInstall(b)},1e3)},_gotoInstall:function(a){var b=this,c=Date.now();1300>c-a&&(window.location=b.installUrl)},_UA:function(){var a=navigator.userAgent;return a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?"ios":a.match(/Android/i)?"android":""}}),c},{requires:["event"]});